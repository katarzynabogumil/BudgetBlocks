<div class="background"></div>

<div id="project-dashboard">
  <div class="card main-card">
    <div class="main-card-inner">
      <div>
        <h1>
          <span class="avoidwrap">Budget</span>
          <span class="avoidwrap">Blocks</span>
        </h1>
        <h2>{{ project.name }}</h2>

        <b>Budget:</b> {{ project.budget | currency: project.currency }} <br>
        <b>Sum:</b> {{ sum | currency: project.currency }} <br>
        <i class="smaller">including one option from each category</i><br>

        <div *ngIf="minSum !== maxSum" id="min-max-sums">
          <b>Maximal cost variant:</b> {{ maxSum | currency: project.currency }}
          <b>Minimal cost variant:</b> {{ minSum | currency: project.currency }}
        </div>

        <div id="bar">
          <mat-progress-bar id="bar-height" mode="determinate" [value]="progressBarValue">
          </mat-progress-bar>

          <div *ngIf="sum > project.budget">
            You are {{ difference | currency: project.currency }} over budget!
          </div>
          <div *ngIf="sum < project.budget">
            You have {{ difference | currency: project.currency }} remaining budget.
          </div>
        </div>

        <b>Catgeories:</b><br>
        <div id="categories">
          <div *ngFor="let category of categories">
            <b>{{ category.category }}:</b>
            {{ expenseSumsByCat[category.orderId] | currency: project.currency }}
            <i> - {{ expenseSumsByCat[category.orderId]/sum * 100 | number: '1.0-2' }}%</i>
          </div>
        </div>

        <b>Type:</b> {{ project.type }}

        <div *ngIf="project.origin">
          <b>Origin:</b> {{ project.origin }}
        </div>

        <div *ngIf="project.destination">
          <b>Destination:</b> {{ project.destination }}
        </div>

        <div *ngIf="project.dateFrom">
          <b>Date from:</b> {{ project.dateFrom | date}}
        </div>

        <div *ngIf="project.dateTo">
          <b>Date to:</b> {{ project.dateTo | date}}
        </div>

        <div *ngIf="project.noOfGuests">
          <b>No of guests:</b> {{ project.noOfGuests }}
        </div>

        <div *ngIf="project.occasion">
          <b>Occasion:</b> {{ project.occasion }}
        </div>

        <div *ngIf="project.location">
          <b>Location:</b> {{ project.location }}
        </div>

        <div *ngIf="project.area">
          <b>Area:</b> {{ project.area }}
        </div>

        <div *ngIf="project.description">
          <b>Description:</b> {{ project.description }}
        </div>

        <div class="edit-remove-links">
          <a class="pointer" [routerLink]="['/edit/' + id]">
            edit
          </a> /
          <a class="pointer" (click)="removeProject()">
            remove
          </a>
        </div>

      </div>
      <app-nav-bar></app-nav-bar>
    </div>
  </div>
  <router-outlet></router-outlet>
</div>